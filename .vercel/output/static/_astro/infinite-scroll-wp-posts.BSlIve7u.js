import{c as C,j as t,s as I,a as U,W as d,P as h}from"./wp-post-card.CHBBOP5o.js";import{r as o}from"./index.SSXOyoI7.js";const b=f=>{const{posts:i,pageInfo:c,language:l,filteredQueries:x}=f,n=o.useRef(null),[s,m]=o.useState(c||{endCursor:"",hasNextPage:!0,offsetPagination:{total:10}}),[P,v]=o.useState(i||[]),g=o.useCallback(async e=>{const[r]=e;if(r?.isIntersecting&&s.hasNextPage==!0){const u=await C(s.endCursor,l.toLocaleUpperCase());v(a=>[...a,...u.posts]),m(u.pageInfo)}},[l,s.endCursor,s.hasNextPage]);return o.useEffect(()=>{const e=n.current,r=new IntersectionObserver(g,{root:null,rootMargin:"-500px 0px 0px 0px",threshold:0});return n.current&&r.observe(n.current),()=>{e&&r.unobserve(e)}},[g,i]),t.jsxs("div",{children:[P.map((e,r)=>{const u=I(e.uri,e.slug),{primaryCategory:a}=U(e.categories);return x?.some(y=>e.title.toLowerCase().includes(y.toLowerCase()))===!0?null:(r+1)%5===0?t.jsx(d,{type:"vertical",locale:l,src:e.featuredImage?.sourceUrl,alt:e.featuredImage?.altText,uri:u,slug:e.slug,title:e.title,excerpt:e.excerpt,authorName:e.author.name,authorAvatarUrl:e.author.avatar.url,authorUri:`/author/${e.author.slug}`,date:e.date,categoryUri:`/${a?.slug}`,categoryName:a?.name},e.id):t.jsx(d,{type:"horizontal",locale:l,src:e.featuredImage?.sourceUrl,alt:e.featuredImage?.altText,slug:e.slug,uri:u,title:e.title,excerpt:e.excerpt,authorName:e.author.name,authorAvatarUrl:e.author.avatar.url,authorUri:`/author/${e.author.slug}`,date:e.date,categoryName:a?.name,categoryUri:`/${a?.slug}`},e.id)}),s.hasNextPage&&t.jsxs("div",{ref:n,children:[t.jsx(h,{}),t.jsx(h,{})]})]})};export{b as default};
